(function(){var a=function(c,b){b=b?b:"";var d=(c||"").toString();if(!b){return c.toString()}if(d.length>=b.length){return d}else{return b.substring(0,b.length-d.length)+d}};window.TimeSpan=function(){var j=0;var f=this;f.sign=function(){if(j>0){return 1}if(j<0){return -1}return 0};f.changeSign=function(){j=-j};f.abs=function(){return new TimeSpan(Math.abs(j))};f.getTotalMilliseconds=function(){return j};f.getTotalSeconds=function(){return j/1000};f.getTotalMinutes=function(){return j/60000};f.getTotalHours=function(){return j/3600000};f.getTotalDays=function(){return j/86400000};f.getMilliseconds=function(){return Math.abs(j%1000)};f.getSeconds=function(){return Math.abs(Math.floor(j/1000)%60)};f.getMinutes=function(){return Math.abs(Math.floor(j/60000)%60)};f.getHours=function(){return Math.abs(Math.floor(j/3600000)%24)};f.getDays=function(){return Math.abs(Math.floor(j/86400000))};f.addMilliseconds=function(i){if(typeof i==="number"&&!isNaN(i)){j+=i}return f};f.addSeconds=function(i){if(typeof i==="number"&&!isNaN(i)){j+=i*1000}return f};f.addMinutes=function(i){if(typeof i==="number"&&!isNaN(i)){j+=i*60000}return f};f.addHours=function(i){if(typeof i==="number"&&!isNaN(i)){j+=i*3600000}return f};f.addDays=function(i){if(typeof i==="number"&&!isNaN(i)){j+=i*86400000}return f};f.compareTo=function(k){var i=f.getTotalMilliseconds();var l;if(k instanceof TimeSpan){l=k.getTotalMilliseconds()}else{if(typeof k==="number"&&!isNaN(k)){l=k}else{throw"invalid Parameter"}}if(i>l){return 1}if(i<l){return -1}else{return 0}};f.add=function(k){var i=j;if(k instanceof TimeSpan){i+=k.getTotalMilliseconds()}else{if(typeof k==="number"&&!isNaN(k)){i+=k}}return new TimeSpan(i)};f.subtract=function(i){if(i instanceof TimeSpan){return f.add(-i.getTotalMilliseconds())}return new TimeSpan(f)};f.toString=function(k){if(k&&typeof(k)==="string"&&k.length>0){var i=f.getDays();var l=f.getHours();var o=f.getMinutes();var r=f.getSeconds();var p=f.getMilliseconds();var n=l>12?l-12:l;var v=l>=12?"PM":"AM";var w=l>=12?"下午":"上午";var q=k;q=q.replace(/dd/g,a(i,"00"));q=q.replace(/d/g,i.toString());q=q.replace(/HH/g,a(l,"00"));q=q.replace(/H/g,l.toString());q=q.replace(/hh/g,a(n,"00"));q=q.replace(/h/g,n.toString());q=q.replace(/mi|mm/gi,a(o,"00"));q=q.replace(/m/g,o.toString());q=q.replace(/ss/g,a(r,"00"));q=q.replace(/s/g,r.toString());q=q.replace(/(f){1,4}/g,function(m,s){return"0000".substring(0,s.length)});q=q.replace(/tt|TT/g,w);q=q.replace(/t|T/g,v);return q}else{var i=f.getDays();var u=(j<0?"-":"")+(i==0?"":a(f.getDays(),"00")+".")+a(f.getHours(),"00")+":"+a(f.getMinutes(),"00")+":"+a(f.getSeconds(),"00")+(f.getMilliseconds()==0?"":"."+a(f.getMilliseconds(),"000"));var v=u.substring(u.lastIndexOf(".")+1);if(parseInt(v)!=0){return u}u=u.substring(0,u.lastIndexOf("."));v=u.substring(u.lastIndexOf(":")+1);if(parseInt(v)!=0){return u}u=u.substring(0,u.lastIndexOf(":"));return u}};if(arguments.length==1){if(typeof(arguments[0])==="string"){var d=/^(\+|\-)?(([0-9]+)\.)?([0-9]+):([0-9]{1,2})(:([0-9]{1,2}))?(\.([0-9]{1,3}))?$/;var b=arguments[0];var e=d.exec(b);if(!e||e.length==0){throw"invalid TimeSpan"}var h=null;if(e[3]){h=parseInt(e[2]);j+=h*86400000}h=parseInt(e[4]);j+=h*3600000;h=parseInt(e[5]);j+=h*60000;if(e[7]){h=parseInt(e[7]);j+=h*1000}if(e[9]){h=parseInt(e[8]);j+=h}if(e[1]==="-"){j=-j}}else{if(arguments[0] instanceof TimeSpan){j=arguments[0].getTotalMilliseconds()}else{if(typeof arguments[0]==="number"&&!isNaN(arguments[0])){j=arguments[0]}else{throw"invalid TimeSpan"}}}}else{if(arguments.length>0){var g=[86400000,3600000,60000,1000,1];for(var c=0;c<g.length;++c){if(c>=arguments.length){break}if(arguments[c]==null){continue}if(typeof(arguments[c])!="number"){throw"invalid TimeSpan"}j+=arguments[c]*g[c]}}}};Date.prototype.add=function(c){var b=new Date(this.getTime());if(c instanceof TimeSpan){b.setMilliseconds(b.getMilliseconds()+c.getTotalMilliseconds())}return b};Date.prototype.subtract=function(b){if(b instanceof Date){return new TimeSpan(this.getTime()-b.getTime())}else{if(b instanceof TimeSpan){return new Date(this.getTime()-b.getTotalMilliseconds())}}};Date.prototype.date=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate())};Date.prototype.timeOfDay=function(){return new TimeSpan(this.getTime()-new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime())};Date.prototype.ToString=function(i){if(i&&typeof(i)==="string"&&i.length>0){var v=this.getFullYear();var n=this.getMonth()+1;var c=this.getDate();var j=this.getHours();var k=j>12?j-12:j;var q=j>=12?"PM":"AM";var r=j>=12?"下午":"上午";var l=this.getMinutes();var p=this.getSeconds();var g=this.getMilliseconds();var u=this.getDay();var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var b=["星期天","星期一","星期二","星期三","星期四","星期五","星期六"];var o=i;o=o.replace(/yyyy/gi,a(v,"0000"));o=o.replace(/yy/gi,a(v,"0000").substring(2));o=o.replace(/MM/g,a(n,"00"));o=o.replace(/M/g,n.toString());o=o.replace(/dd/g,a(c,"00"));o=o.replace(/d/g,c.toString());o=o.replace(/HH/g,a(j,"00"));o=o.replace(/H/g,j.toString());o=o.replace(/hh/g,a(k,"00"));o=o.replace(/h/g,k.toString());o=o.replace(/mi|mm/gi,a(l,"00"));o=o.replace(/m/g,l.toString());o=o.replace(/ss/g,a(p,"00"));o=o.replace(/s/g,p.toString());o=o.replace(/(f){1,4}/g,function(d,f){return"0000".substring(0,f.length)});o=o.replace(/tt|TT/g,r);o=o.replace(/t|T/g,q);o=o.replace(/ww|WW/g,b[u]);o=o.replace(/w|W/gi,e[u]);return o}else{return this.toString()}};Date.prototype.ticks=function(){var b=this.getTime();return b*10000+6.21355968e+17}})();
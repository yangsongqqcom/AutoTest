Number.prototype.bindToString=function(b){b=b?b:"";var e=this.toString();if(b.indexOf(".")<0){if(e.length>=b.length){return e}else{return b.substring(0,b.length-e.length)+e}}else{var a=b.split(".");if(a.length!=2){throw"Invalid format"}var d=Math.floor(this);var c=(this-d).toString().substring(2);return d.bindToString(a[0])+"."+(a[1].length>c.length?c+a[1].substring(c.length):c)}};Date.prototype.bindToString=function(e){if(e&&typeof(e)==="string"&&e.length>0){var q=this.getFullYear();var k=this.getMonth()+1;var b=this.getDate();var g=this.getHours();var i=g>12?g-12:g;var o=g>=12?"下午":"上午";var j=this.getMinutes();var n=this.getSeconds();var c=this.getMilliseconds();var p=this.getDay();var a=["星期天","星期一","星期二","星期三","星期四","星期五","星期六"];var l=e;l=l.replace(/yyyy/gi,q.bindToString("0000"));l=l.replace(/yy/gi,q.bindToString("0000").substring(2));l=l.replace(/MM/g,k.bindToString("00"));l=l.replace(/M/g,k.toString());l=l.replace(/dd/g,b.bindToString("00"));l=l.replace(/d/g,b.toString());l=l.replace(/HH/g,g.bindToString("00"));l=l.replace(/H/g,g.toString());l=l.replace(/hh/g,i.bindToString("00"));l=l.replace(/h/g,i.toString());l=l.replace(/mi|mm/gi,j.bindToString("00"));l=l.replace(/m/g,j.toString());l=l.replace(/ss/g,n.bindToString("00"));l=l.replace(/s/g,n.toString());l=l.replace(/(f){1,4}/g,function(d,f,h){return h.bindToString("0000".substring(0,d.length))});l=l.replace(/tt|t/g,o);l=l.replace(/w/gi,a[p]);return l}else{return this.toString()}};String.prototype.bindToString=function(b){if(b&&typeof(b)==="string"&&b.length>0){var c=/^[0-9]+(\.[0-9]+)?$/;if(c.test(this)){return parseFloat(this).bindToString(b)}var a=this.tryParseDate();if(a instanceof Date){return a.bindToString(b)}}return this};String.prototype.tryParseDate=function(){var h=/^([0-9]{4})[-\/\.]([0-9]{1,2})[-\/\.]([0-9]{1,2})(T|GMT)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(\.([0-9]{1,3}))?([0-9]+)?(\+[0-9]{1,2}:[0-9]{1,2})?$/i;var a=h.exec(this);if(a){var g=a[2],b=a[3],d=a[5]||"0",f=a[6]||"0",i=a[7]||"0",e=a[9]||"0";var c=new Date(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10),parseInt(a[5]||"0",10),parseInt(a[6]||"0",10),parseInt(a[7]||"0",10),parseInt(a[9]||"0",10));return c}h=/Date\(([0-9]+)\)/i;a=h.exec(this);if(a){return new Date(parseInt(a[1],10))}return null};String.prototype.startWith=function(a){return this.substring(0,1)==a};Array.prototype.contains=function(a){for(var b=0;b<this.length;++b){if(this[b]==a){return true}}return false};Date.prototype.date=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate())};commonHelper={encodeHtml:function(a){if(!a){return""}return a.replace(/&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/ /,"&nbsp;").replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>")},decodeHtml:function(a){if(!a){return""}return a.replace(/\<br *\/?\>/gi,"\r\n").replace(/&nbsp;/gi," ").replace(/&gt;/gi,">").replace(/&lt;/gi,"<").replace(/&amp;/gi,"&")},getQuery:function(b,a){if(typeof(a)!="function"){a=function(){}}if(b instanceof DbBuildResult){$.ajax({type:"post",url:"/api/DataSearch/Search",dataType:"json",data:b,success:function(c){a(true,c)},error:function(){a(false)}})}else{throw"the query parameter is not instance of DbBuildResult"}},cloneObject:function(d){var c;switch(typeof d){case"undefined":break;case"string":c=d+"";break;case"number":c=d-0;break;case"boolean":c=d;break;case"object":if(d===null){c=null}else{if(d instanceof Array){c=[];for(var a=0;a<d.length;a++){c.push(commonHelper.cloneObject(d[a]))}}else{c={};for(var b in d){c[b]=commonHelper.cloneObject(d[b])}}}break;default:c=d;break}return c}};
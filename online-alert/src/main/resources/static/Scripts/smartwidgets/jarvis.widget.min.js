/* SmartAdmin - v1.4.1 - 2014-06-26 */
!function(g,h,i,j){function k(a,d){this.obj=g(a),this.o=g.extend({},g.fn[l].defaults,d),this.objId=this.obj.attr("id"),this.pwCtrls=".jarviswidget-ctrls",this.widget=this.obj.find(this.o.widgets),this.toggleClass=this.o.toggleClass.split("|"),this.editClass=this.o.editClass.split("|"),this.fullscreenClass=this.o.fullscreenClass.split("|"),this.customClass=this.o.customClass.split("|"),this.init()}var l="jarvisWidgets";k.prototype={_settings:function(){var b=this;storage=!!function(){var d,e=+new Date;try{return localStorage.setItem(e,e),d=localStorage.getItem(e)==e,localStorage.removeItem(e),d}catch(f){}}()&&localStorage;if(storage&&b.o.localStorage){if(b.o.ajaxnav===!0){widget_url=location.hash.replace(/^#/,""),keySettings="Plugin_settings_"+widget_url+"_"+b.objId,getKeySettings=localStorage.getItem(keySettings),keyPosition="Plugin_position_"+widget_url+"_"+b.objId,getKeyPosition=localStorage.getItem(keyPosition)}else{keySettings="jarvisWidgets_settings_"+location.pathname+"_"+b.objId,getKeySettings=localStorage.getItem(keySettings),keyPosition="jarvisWidgets_position_"+location.pathname+"_"+b.objId,getKeyPosition=localStorage.getItem(keyPosition)}}clickEvent="ontouchstart" in h||h.DocumentTouch&&i instanceof DocumentTouch?"touchstart":"click"},_runLoaderWidget:function(c){var d=this;d.o.indicator===!0&&c.parents(d.o.widgets).find(".jarviswidget-loader").stop(!0,!0).fadeIn(100).delay(d.o.indicatorTime).fadeOut(100)},_getPastTimestamp:function(m){var n=this,o=new Date(m),p=o.getMonth()+1,q=o.getDate(),r=o.getFullYear(),s=o.getHours(),t=o.getMinutes(),u=o.getUTCSeconds();10>p&&(p="0"+p),10>q&&(q="0"+q),10>s&&(s="0"+s),10>t&&(t="0"+t),10>u&&(u="0"+u);var v=n.o.timestampFormat.replace(/%d%/g,q).replace(/%m%/g,p).replace(/%y%/g,r).replace(/%h%/g,s).replace(/%i%/g,t).replace(/%s%/g,u);return v},_loadAjaxFile:function(a,f,m){var n=this;a.find(".widget-body").load(f,function(b,e,o){var p=g(this);"error"==e&&p.html('<h4 class="alert alert-danger">'+n.o.labelError+"<b> "+o.status+" "+o.statusText+"</b></h4>");if("success"==e){var q=a.find(n.o.timestampPlaceholder);q.length&&q.html(n._getPastTimestamp(new Date)),"function"==typeof n.o.afterLoad&&n.o.afterLoad.call(this,a)}}),n._runLoaderWidget(m)},_saveSettingsWidget:function(){var a=this;if(a._settings(),storage&&a.o.localStorage){var d=[];a.obj.find(a.o.widgets).each(function(){var c={};c.id=g(this).attr("id"),c.style=g(this).attr("data-widget-attstyle"),c.title=g(this).children("header").children("h2").text(),c.hidden=g(this).is(":hidden")?1:0,c.collapsed=g(this).hasClass("jarviswidget-collapsed")?1:0,d.push(c)}),storeSettingsObj=JSON.stringify({widget:d}),getKeySettings!=storeSettingsObj&&localStorage.setItem(keySettings,storeSettingsObj)}"function"==typeof a.o.onSave&&a.o.onSave.call(this,null,storeSettingsObj)},_savePositionWidget:function(){var a=this;if(a._settings(),storage&&a.o.localStorage){var e=[];a.obj.find(a.o.grid+".sortable-grid").each(function(){var b=[];g(this).children(a.o.widgets).each(function(){var d={};d.id=g(this).attr("id"),b.push(d)});var c={section:b};e.push(c)});var f=JSON.stringify({grid:e});getKeyPosition!=f&&localStorage.setItem(keyPosition,f,null)}"function"==typeof a.o.onSave&&a.o.onSave.call(this,f)},init:function(){var a=this;if(a._settings(),g("#"+a.objId).length||alert("It looks like your using a class instead of an ID, dont do that!"),a.o.rtl===!0&&g("body").addClass("rtl"),g(a.o.grid).each(function(){g(this).find(a.o.widgets).length&&g(this).addClass("sortable-grid")}),storage&&a.o.localStorage&&getKeyPosition){var d=JSON.parse(getKeyPosition);for(var m in d.grid){var n=a.obj.find(a.o.grid+".sortable-grid").eq(m);for(var o in d.grid[m].section){n.append(g("#"+d.grid[m].section[o].id))}}}if(storage&&a.o.localStorage&&getKeySettings){var p=JSON.parse(getKeySettings);for(var m in p.widget){var q=g("#"+p.widget[m].id);p.widget[m].style&&q.removeClassPrefix("jarviswidget-color-").addClass(p.widget[m].style).attr("data-widget-attstyle",""+p.widget[m].style),1==p.widget[m].hidden?q.hide(1):q.show(1).removeAttr("data-widget-hidden"),1==p.widget[m].collapsed&&q.addClass("jarviswidget-collapsed").children("div").hide(1),q.children("header").children("h2").text()!=p.widget[m].title&&q.children("header").children("h2").text(p.widget[m].title)}}a.widget.each(function(){var b,s,t,u,v,w,x,y,z=g(this),A=g(this).children("header");if(!A.parent().attr("role")){z.data("widget-hidden")===!0&&z.hide(),z.data("widget-collapsed")===!0&&z.addClass("jarviswidget-collapsed").children("div").hide(),b=a.o.customButton===!0&&z.data("widget-custombutton")===j&&0!==a.customClass[0].length?'<a href="javascript:void(0);" class="button-icon jarviswidget-custom-btn"><i class="'+a.customClass[0]+'"></i></a>':"",s=a.o.deleteButton===!0&&z.data("widget-deletebutton")===j?'<a href="javascript:void(0);" class="button-icon jarviswidget-delete-btn" rel="tooltip" title="Delete" data-placement="bottom"><i class="'+a.o.deleteClass+'"></i></a>':"",t=a.o.editButton===!0&&z.data("widget-editbutton")===j?'<a href="javascript:void(0);" class="button-icon jarviswidget-edit-btn" rel="tooltip" title="Edit Title" data-placement="bottom"><i class="'+a.editClass[0]+'"></i></a>':"",u=a.o.fullscreenButton===!0&&z.data("widget-fullscreenbutton")===j?'<a href="javascript:void(0);" class="button-icon jarviswidget-fullscreen-btn" rel="tooltip" title="Fullscreen" data-placement="bottom"><i class="'+a.fullscreenClass[0]+'"></i></a>':"",a.o.colorButton===!0&&z.data("widget-colorbutton")===j?(v='<a data-toggle="dropdown" class="dropdown-toggle color-box selector" href="javascript:void(0);"></a><ul class="dropdown-menu arrow-box-up-right color-select pull-right"><li><span class="bg-color-green" data-widget-setstyle="jarviswidget-color-green" rel="tooltip" data-placement="left" data-original-title="Green Grass"></span></li><li><span class="bg-color-greenDark" data-widget-setstyle="jarviswidget-color-greenDark" rel="tooltip" data-placement="top" data-original-title="Dark Green"></span></li><li><span class="bg-color-greenLight" data-widget-setstyle="jarviswidget-color-greenLight" rel="tooltip" data-placement="top" data-original-title="Light Green"></span></li><li><span class="bg-color-purple" data-widget-setstyle="jarviswidget-color-purple" rel="tooltip" data-placement="top" data-original-title="Purple"></span></li><li><span class="bg-color-magenta" data-widget-setstyle="jarviswidget-color-magenta" rel="tooltip" data-placement="top" data-original-title="Magenta"></span></li><li><span class="bg-color-pink" data-widget-setstyle="jarviswidget-color-pink" rel="tooltip" data-placement="right" data-original-title="Pink"></span></li><li><span class="bg-color-pinkDark" data-widget-setstyle="jarviswidget-color-pinkDark" rel="tooltip" data-placement="left" data-original-title="Fade Pink"></span></li><li><span class="bg-color-blueLight" data-widget-setstyle="jarviswidget-color-blueLight" rel="tooltip" data-placement="top" data-original-title="Light Blue"></span></li><li><span class="bg-color-teal" data-widget-setstyle="jarviswidget-color-teal" rel="tooltip" data-placement="top" data-original-title="Teal"></span></li><li><span class="bg-color-blue" data-widget-setstyle="jarviswidget-color-blue" rel="tooltip" data-placement="top" data-original-title="Ocean Blue"></span></li><li><span class="bg-color-blueDark" data-widget-setstyle="jarviswidget-color-blueDark" rel="tooltip" data-placement="top" data-original-title="Night Sky"></span></li><li><span class="bg-color-darken" data-widget-setstyle="jarviswidget-color-darken" rel="tooltip" data-placement="right" data-original-title="Night"></span></li><li><span class="bg-color-yellow" data-widget-setstyle="jarviswidget-color-yellow" rel="tooltip" data-placement="left" data-original-title="Day Light"></span></li><li><span class="bg-color-orange" data-widget-setstyle="jarviswidget-color-orange" rel="tooltip" data-placement="bottom" data-original-title="Orange"></span></li><li><span class="bg-color-orangeDark" data-widget-setstyle="jarviswidget-color-orangeDark" rel="tooltip" data-placement="bottom" data-original-title="Dark Orange"></span></li><li><span class="bg-color-red" data-widget-setstyle="jarviswidget-color-red" rel="tooltip" data-placement="bottom" data-original-title="Red Rose"></span></li><li><span class="bg-color-redLight" data-widget-setstyle="jarviswidget-color-redLight" rel="tooltip" data-placement="bottom" data-original-title="Light Red"></span></li><li><span class="bg-color-white" data-widget-setstyle="jarviswidget-color-white" rel="tooltip" data-placement="right" data-original-title="Purity"></span></li><li><a href="javascript:void(0);" class="jarviswidget-remove-colors" data-widget-setstyle="" rel="tooltip" data-placement="bottom" data-original-title="Reset widget color to default">Remove</a></li></ul>',A.prepend('<div class="widget-toolbar">'+v+"</div>")):v="",a.o.toggleButton===!0&&z.data("widget-togglebutton")===j?(x=z.data("widget-collapsed")===!0||z.hasClass("jarviswidget-collapsed")?a.toggleClass[1]:a.toggleClass[0],w='<a href="javascript:void(0);" class="button-icon jarviswidget-toggle-btn" rel="tooltip" title="Collapse" data-placement="bottom"><i class="'+x+'"></i></a>'):w="",y=a.o.refreshButton===!0&&z.data("widget-refreshbutton")!==!1&&z.data("widget-load")?'<a href="javascript:void(0);" class="button-icon jarviswidget-refresh-btn" data-loading-text="&nbsp;&nbsp;Loading...&nbsp;" rel="tooltip" title="Refresh" data-placement="bottom"><i class="'+a.o.refreshButtonClass+'"></i></a>':"";var B=a.o.buttonOrder.replace(/%refresh%/g,y).replace(/%delete%/g,s).replace(/%custom%/g,b).replace(/%fullscreen%/g,u).replace(/%edit%/g,t).replace(/%toggle%/g,w);(""!==y||""!==s||""!==b||""!==u||""!==t||""!==w)&&A.prepend('<div class="jarviswidget-ctrls">'+B+"</div>"),a.o.sortable===!0&&z.data("widget-sortable")===j&&z.addClass("jarviswidget-sortable"),z.find(a.o.editPlaceholder).length&&z.find(a.o.editPlaceholder).find("input").val(g.trim(A.children("h2").text())),A.append('<span class="jarviswidget-loader"><i class="fa fa-refresh fa-spin"></i></span>'),z.attr("role","widget").children("div").attr("role","content").prev("header").attr("role","heading").children("div").attr("role","menu")}});if(a.o.buttonsHidden===!0&&g(a.o.pwCtrls).hide(),g(".jarviswidget header [rel=tooltip]").tooltip(),a.obj.find("[data-widget-load]").each(function(){var b=g(this),s=b.children(),t=b.data("widget-load"),u=1000*b.data("widget-refresh");b.children();b.find(".jarviswidget-ajax-placeholder").length||(b.children("widget-body").append('<div class="jarviswidget-ajax-placeholder">'+a.o.loadingLabel+"</div>"),b.data("widget-refresh")>0?(a._loadAjaxFile(b,t,s),g.intervalArr.push(setInterval(function(){a._loadAjaxFile(b,t,s)},u))):a._loadAjaxFile(b,t,s))}),a.o.sortable===!0&&jQuery.ui){var r=a.obj.find(".sortable-grid").not("[data-widget-excludegrid]");r.sortable({items:r.find(".jarviswidget-sortable"),connectWith:r,placeholder:a.o.placeholderClass,cursor:"move",revert:!0,opacity:a.o.opacity,delay:200,cancel:".button-icon, #jarviswidget-fullscreen-mode > div",zIndex:10000,handle:a.o.dragHandle,forcePlaceholderSize:!0,forceHelperSize:!0,update:function(b,e){a._runLoaderWidget(e.item.children()),a._savePositionWidget(),"function"==typeof a.o.onChange&&a.o.onChange.call(this,e.item)}})}a.o.buttonsHidden===!0&&a.widget.children("header").hover(function(){g(this).children(a.o.pwCtrls).stop(!0,!0).fadeTo(100,1)},function(){g(this).children(a.o.pwCtrls).stop(!0,!0).fadeTo(100,0)}),a._clickEvents(),g(a.o.deleteSettingsKey).on(clickEvent,this,function(b){if(storage&&a.o.localStorage){var e=confirm(a.o.settingsKeyLabel);e&&localStorage.removeItem(keySettings)}a.stopPropagation();b.preventDefault()}),g(a.o.deletePositionKey).on(clickEvent,this,function(b){if(storage&&a.o.localStorage){var e=confirm(a.o.positionKeyLabel);e&&localStorage.removeItem(keyPosition)}a.stopPropagation();b.preventDefault()});if(storage&&a.o.localStorage){(null===getKeySettings||getKeySettings.length<1)&&a._saveSettingsWidget(),(null===getKeyPosition||getKeyPosition.length<1)&&a._savePositionWidget()}},_clickEvents:function(){function a(){if(g("#jarviswidget-fullscreen-mode").length){var d=g(h).height(),f=g("#jarviswidget-fullscreen-mode").find(b.o.widgets).children("header").height();g("#jarviswidget-fullscreen-mode").find(b.o.widgets).children("div").height(d-f-15)}}var b=this;b._settings(),b.widget.on(clickEvent,".jarviswidget-toggle-btn",function(d){var f=g(this),m=f.parents(b.o.widgets);b._runLoaderWidget(f);if(m.hasClass("jarviswidget-collapsed")){f.children().removeClass(b.toggleClass[1]).addClass(b.toggleClass[0]).parents(b.o.widgets).removeClass("jarviswidget-collapsed").children("[role=content]").slideDown(b.o.toggleSpeed,function(){b._saveSettingsWidget()})}else{f.children().removeClass(b.toggleClass[0]).addClass(b.toggleClass[1]).parents(b.o.widgets).addClass("jarviswidget-collapsed").children("[role=content]").slideUp(b.o.toggleSpeed,function(){b._saveSettingsWidget()})}"function"==typeof b.o.onToggle&&b.o.onToggle.call(this,m),d.stopPropagation();d.preventDefault()}),b.widget.on(clickEvent,".jarviswidget-fullscreen-btn",function(c){var d=g(this).parents(b.o.widgets),m=d.children("div");b._runLoaderWidget(g(this));if(g("#jarviswidget-fullscreen-mode").length){g(".nooverflow").removeClass("nooverflow"),d.unwrap("<div>").children("div").removeAttr("style").end().find(".jarviswidget-fullscreen-btn").children().removeClass(b.fullscreenClass[1]).addClass(b.fullscreenClass[0]).parents(b.pwCtrls).children("a").show(),m.hasClass("jarviswidget-visible")&&m.hide().removeClass("jarviswidget-visible")}else{g("body").addClass("nooverflow"),d.wrap('<div id="jarviswidget-fullscreen-mode"/>').parent().find(".jarviswidget-fullscreen-btn").children().removeClass(b.fullscreenClass[0]).addClass(b.fullscreenClass[1]).parents(b.pwCtrls).children("a:not(.jarviswidget-fullscreen-btn)").hide(),m.is(":hidden")&&m.show().addClass("jarviswidget-visible")}a();"function"==typeof b.o.onFullscreen&&b.o.onFullscreen.call(this,d);c.stopPropagation();c.preventDefault()}),g(h).resize(function(){a()}),b.widget.on(clickEvent,".jarviswidget-edit-btn",function(d){var e=g(this).parents(b.o.widgets);b._runLoaderWidget(g(this));if(e.find(b.o.editPlaceholder).is(":visible")){g(this).children().removeClass(b.editClass[1]).addClass(b.editClass[0]).parents(b.o.widgets).find(b.o.editPlaceholder).slideUp(b.o.editSpeed,function(){b._saveSettingsWidget()})}else{g(this).children().removeClass(b.editClass[0]).addClass(b.editClass[1]).parents(b.o.widgets).find(b.o.editPlaceholder).slideDown(b.o.editSpeed)}"function"==typeof b.o.onEdit&&b.o.onEdit.call(this,e),d.stopPropagation();d.preventDefault()}),g(b.o.editPlaceholder).find("input").keyup(function(){g(this).parents(b.o.widgets).children("header").children("h2").text(g(this).val())}),b.widget.on(clickEvent,"[data-widget-setstyle]",function(d){var f=g(this).data("widget-setstyle"),m="";g(this).parents(b.o.editPlaceholder).find("[data-widget-setstyle]").each(function(){m+=g(this).data("widget-setstyle")+" "}),g(this).parents(b.o.widgets).attr("data-widget-attstyle",""+f).removeClassPrefix("jarviswidget-color-").addClass(f),b._runLoaderWidget(g(this)),b._saveSettingsWidget(),d.stopPropagation();d.preventDefault()}),b.widget.on(clickEvent,".jarviswidget-custom-btn",function(d){var e=g(this).parents(b.o.widgets);b._runLoaderWidget(g(this));if(g(this).children("."+b.customClass[0]).length){g(this).children().removeClass(b.customClass[0]).addClass(b.customClass[1]),"function"==typeof b.o.customStart&&b.o.customStart.call(this,e)}else{g(this).children().removeClass(b.customClass[1]).addClass(b.customClass[0]),"function"==typeof b.o.customEnd&&b.o.customEnd.call(this,e)}b._saveSettingsWidget(),d.stopPropagation();d.preventDefault()}),b.widget.on(clickEvent,".jarviswidget-delete-btn",function(d){var m=g(this).parents(b.o.widgets),n=m.attr("id"),o=m.children("header").children("h2").text();if(g.SmartMessageBox){g.SmartMessageBox({title:"<i class='fa fa-times' style='color:#ed1c24'></i> "+b.o.labelDelete+' "'+o+'"',content:"Warning: This action cannot be undone",buttons:"[No][Yes]"},function(c){"Yes"==c&&(b._runLoaderWidget(g(this)),g("#"+n).fadeOut(b.o.deleteSpeed,function(){g(this).remove(),"function"==typeof b.o.onDelete&&b.o.onDelete.call(this,m)}))})}else{g("#"+n).fadeOut(b.o.deleteSpeed,function(){g(this).remove(),"function"==typeof b.o.onDelete&&b.o.onDelete.call(this,m)})}d.stopPropagation();d.preventDefault()}),b.widget.on(clickEvent,".jarviswidget-refresh-btn",function(d){var m=g(this).parents(b.o.widgets),n=m.data("widget-load"),o=m.children(),p=g(this);p.button("loading"),o.addClass("widget-body-ajax-loading"),setTimeout(function(){p.button("reset"),o.removeClass("widget-body-ajax-loading"),b._loadAjaxFile(m,n,o)},1000),d.stopPropagation();d.preventDefault()})},destroy:function(){var b=this;b.widget.off("click",b._clickEvents()),b.obj.removeData(l)}},g.fn[l]=function(a){return this.each(function(){var b=g(this),e=b.data(l),f="object"==typeof a&&a;e||b.data(l,e=new k(this,f)),"string"==typeof a&&e[a]()})},g.fn[l].defaults={grid:"section",widgets:".jarviswidget",localStorage:!0,deleteSettingsKey:"",settingsKeyLabel:"Reset settings?",deletePositionKey:"",positionKeyLabel:"Reset position?",sortable:!0,buttonsHidden:!1,toggleButton:!0,toggleClass:"min-10 | plus-10",toggleSpeed:200,onToggle:function(){},deleteButton:!0,deleteClass:"trashcan-10",deleteSpeed:200,onDelete:function(){},editButton:!0,editPlaceholder:".jarviswidget-editbox",editClass:"pencil-10 | delete-10",editSpeed:200,onEdit:function(){},colorButton:!0,fullscreenButton:!0,fullscreenClass:"fullscreen-10 | normalscreen-10",fullscreenDiff:3,onFullscreen:function(){},customButton:!0,customClass:"",customStart:function(){},customEnd:function(){},buttonOrder:"%refresh% %delete% %custom% %edit% %fullscreen% %toggle%",opacity:1,dragHandle:"> header",placeholderClass:"jarviswidget-placeholder",indicator:!0,indicatorTime:600,ajax:!0,loadingLabel:"loading...",timestampPlaceholder:".jarviswidget-timestamp",timestampFormat:"Last update: %m%/%d%/%y% %h%:%i%:%s%",refreshButton:!0,refreshButtonClass:"refresh-10",labelError:"Sorry but there was a error:",labelUpdated:"Last Update:",labelRefresh:"Refresh",labelDelete:"Delete widget:",afterLoad:function(){},rtl:!1,onChange:function(){},onSave:function(){},ajaxnav:!0},g.fn.removeClassPrefix=function(a){this.each(function(b,f){var m=f.className.split(" ").map(function(c){return 0===c.indexOf(a)?"":c});f.className=g.trim(m.join(" "))});return this}}(jQuery,window,document);
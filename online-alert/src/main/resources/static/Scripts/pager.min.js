(function(a){var e;if(window.formLoading){e=new formLoading()}var b=function(h,f){var i=h.data("settings");if(typeof(i.pageSize)==="undefined"&&f.pageSize&&typeof(f.pageSize)==="number"){i.pageSize=f.pageSize}else{if(f.pageSize&&typeof(f.pageSize)==="string"&&a("#"+f.pageSize).is("select")){var g=a.trim(a("#"+f.pageSize).eq(0).val()).replace(/^0+/,"");if(/^[0-9]+$/.test(g)){i.pageSize=parseInt(g)}else{i.pageSize=10}}else{if(typeof(i.pageSize)==="undefined"){i.pageSize=10}}}if(i.recordCount>0){i.pageCount=Math.ceil(i.recordCount/i.pageSize);if(typeof(i.pageIndex)==="undefined"||i.pageIndex<0){i.pageIndex=0}else{if(i.pageIndex>=i.pageCount){i.pageIndex=i.pageCount-1}}}else{i.pageIndex=0}h.data("settings",i)};var d=function(l,k){var m=l.data("settings");var q=l.find(".pagination > ul");q.empty();if(m.recordCount>0){if(k.pageSize&&typeof(k.pageSize)==="string"){a("#"+k.pageSize).show(100)}l.find(".dataTables_info").html('显示<span class="numStart"></span>-<span class="numEnd"></span>条. 第<span class="nowPage"></span>页, 共<span class="pageCount"></span>页');if(k.showFirstLast!==false){q.append("<li"+(m.pageIndex==0?' class="disabled"':"")+'><a pType="pg_first" href="javascript:void(0)"><i class="fa fa-angle-double-left"></i></a></li>')}if(k.showPrevNext!==false){q.append("<li"+(m.pageIndex==0?' class="disabled"':"")+'><a pType="pg_prev" href="javascript:void(0)"><i class="fa fa-angle-left"></i></a></li>')}var h=k.showPoint!==false;var g=k.showPoint!==false;var o=(m.pageIndex+1)-Math.floor(m.numCount/2);if(o<=1){h=false;o=1}var n=o+m.numCount-1;if(n>=m.pageCount){n=m.pageCount;var p=n-m.numCount+1;if(p>0){o=p}if(o<=1){h=false;o=1}g=false}if(h){q.append('<li><a pType="pg_prevpi" href="javascript:void(0)">...</a></li>')}for(var f=o;f<=n;++f){q.append("<li"+(m.pageIndex+1==f?' class="active"':"")+'><a pType="pg_num" href="javascript:void(0)">'+f.toString()+"</a></li>")}if(g){q.append('<li><a pType="pg_nextpi" href="javascript:void(0)">...</a></li>')}if(k.showPrevNext!==false){q.append("<li"+(m.pageIndex+1>=m.pageCount?' class="disabled"':"")+'><a pType="pg_next" href="javascript:void(0)"><i class="fa fa-angle-right"></i></a></li>')}if(k.showFirstLast!==false){q.append("<li"+(m.pageIndex+1>=m.pageCount?' class="disabled"':"")+'><a pType="pg_last" href="javascript:void(0)"><i class="fa fa-angle-double-right"></i></a></li>')}l.find(".numStart").text(m.pageIndex*m.pageSize+1);var j=(m.pageIndex+1)*m.pageSize;if(j>m.recordCount){j=m.recordCount}l.find(".numEnd").text(j);l.find(".nowPage").text(m.pageIndex+1);l.find(".pageCount").text(m.pageCount);if(k.showPageInput){l.find("input[type='text']").css("display","inline-block")}if(k.btnClass){q.find("a").addClass(k.btnClass)}}else{if(k.pageSize&&typeof(k.pageSize)==="string"){a("#"+k.pageSize).hide(100)}l.find(".dataTables_info").text("没有数据");l.find("input[type='text']").css("display","none")}};var c=function(g,f){if(e){e.show("正在努力加载...")}b(g,f);var h=g.data("settings");var i={pageIndex:h.pageIndex,pageSize:h.pageSize,recordCount:h.recordCount,pageCount:h.pageCount,numCount:h.numCount,triggerType:h.triggerType};f.onPageChange.apply(i,[function(j){if(e){e.hide()}if(typeof(j)==="number"&&j!=h.recordCount){h.recordCount=j;b(g,f);d(g,f)}}])};a.extend(a.fn,{pageButton:function(f){var g=a(this).eq(0);if(g.length==0){return this}if(!f){return this}if(typeof(f.onPageChange)!=="function"){f.onPageChange=function(){}}if(!f.nonDataHtml){f.nonDataHtml="没有数据"}g.empty();g.html('<div class="col-sm-6 col-xs-12 hidden-xs"><div class="dataTables_info"></div></div><div class="col-xs-12 col-sm-6"><div class="dataTables_paginate paging_simple_numbers"><ul class="pagination pagination-sm"></ul></div></div>');var h={pageIndex:undefined,pageSize:undefined,recordCount:0,pageCount:0,numCount:5,triggerType:""};if(f.showPageInput){g.find(".dataTables_paginate").append('<input type="text" class="input-mini" maxlength="10" style="margin:-24px 0 0 10px;display:none;"/><button type="button" class="btn btn-mini" style="margin:-24px 0px 0px 8px;">GO <i class="icon-arrow-right"></i></button>')}if(f.numCount&&typeof(f.numCount)==="number"){h.numCount=f.numCount}if(f.recordCount&&typeof(f.recordCount)==="number"){h.recordCount=f.recordCount}if(f.pageIndex&&typeof(f.pageIndex)==="number"){h.pageIndex=f.pageIndex}g.data("settings",h);b(g,f);g.on("click",".pagination a",function(){if(a(this).parent().hasClass("disabled")||a(this).parent().hasClass("active")){return false}var i=a(this).attr("pType");switch(i){case"pg_first":h.pageIndex=0;h.triggerType="pagefirst";break;case"pg_prev":--h.pageIndex;if(h.pageIndex<0){h.pageIndex=0}h.triggerType="pageprev";break;case"pg_prevpi":h.triggerType="pagenum";h.pageIndex-=h.numCount;break;case"pg_num":h.triggerType="pagenum";h.pageIndex=parseInt(a(this).text())-1;break;case"pg_nextpi":h.triggerType="pagenum";h.pageIndex+=h.numCount;break;case"pg_next":h.triggerType="pagenext";++h.pageIndex;break;case"pg_last":h.triggerType="pagelast";h.pageIndex=h.pageCount-1;break}if(h.pageIndex<0){h.pageIndex=0}else{if(h.pageIndex>=h.pageCount){h.pageIndex=h.pageCount-1}}d(g,f);c(g,f);return false});g.on("click","button",function(){var j=a.trim(a(this).prev().val().replace(/^0+/,""));if(/^[0-9]+$/.test(j)){var i=parseInt(j)-1;if(i>=h.pageCount){i=h.pageCount-1}if(i<=0){i=0}if(i!=h.pageIndex){h.pageIndex=i;h.triggerType="inputnum";d(g,f);c(g,f)}a(this).prev().val("")}});g.on("keypress",".pagination input[type='text']",function(j){var i=j.charCode&&typeof(j.charCode)==="number"?j.charCode:j.keyCode;if(i>=48&&i<=57){return true}else{if(i==13){a(this).next().click()}else{if(i==8){return true}else{return false}}}});if(f.pageSize&&typeof(f.pageSize)==="string"){a("#"+f.pageSize).on("change",function(){h.triggerType="pagesizechange";b(g,f);d(g,f);c(g,f)})}d(g,f);if(f.searchBtn&&typeof(f.searchBtn)==="string"&&/^[0-9a-z_]+$/i.test(f.searchBtn)){a("#"+f.searchBtn).on("click",function(){h.pageIndex=0;h.triggerType="searchbutton";b(g,f);d(g,f);c(g,f)})}if(f.autoLoad!==false){c(g,f)}g.data("options",f);return g},reloadPage:function(f){var j=a(this).eq(0);if(j.length==0){return}var k=j.data("settings");k.triggerType="reload";var i=j.data("options");if(k&&i){if(f&&typeof(f)==="number"){var g=k.recordCount+f;if(g!=k.recordCount){if(k.pageIndex+1<k.pageCount||(g<k.recordCount&&g-(k.pageIndex*k.pageSize))){k.recordCount=g;j.data("settings",k);b(j,i);d(j,i);c(j,i)}else{k.recordCount=g;j.data("settings",k);b(j,i);d(j,i);j.find(".numStart").text(k.pageIndex*k.pageSize+1);var h=(k.pageIndex+1)*k.pageSize;if(h>k.recordCount){h=k.recordCount}j.find(".numEnd").text(h);j.find(".nowPage").text(k.pageIndex+1);j.find(".pageCount").text(k.pageCount)}}}else{if(typeof(f)==="boolean"){if(f){d(j,i);c(j,i)}}}}},jumpPage:function(h,f){var i=a(this).eq(0);if(i.length==0){return}var j=i.data("settings");j.triggerType="setpage";var g=i.data("options");j.pageIndex=h;b(i,g);d(i,g);if(f===true){c(i,g)}},clearPage:function(){var g=a(this).eq(0);if(g.length==0){return}var h=g.data("settings");h.triggerType="clear";var f=g.data("options");h.pageIndex=0;h.recordCount=0;b(g,f);d(g,f)}})})(jQuery);
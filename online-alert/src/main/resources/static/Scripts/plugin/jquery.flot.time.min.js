(function(I){var H={xaxis:{timezone:null,timeformat:null,twelveHourClock:false,monthNames:null}};function J(L,M){return M*Math.floor(L/M)}function F(N,P,W,R){if(typeof N.strftime=="function"){return N.strftime(P)}var M=function(X,Y){X=""+X;Y=""+(Y==null?"0":Y);return X.length==1?Y+X:X};var L=[];var O=false;var U=N.getHours();var V=U<12;if(W==null){W=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}if(R==null){R=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}var S;if(U>12){S=U-12}else{if(U==0){S=12}else{S=U}}for(var Q=0;Q<P.length;++Q){var T=P.charAt(Q);if(O){switch(T){case"a":T=""+R[N.getDay()];break;case"b":T=""+W[N.getMonth()];break;case"d":T=M(N.getDate());break;case"e":T=M(N.getDate()," ");break;case"h":case"H":T=M(U);break;case"I":T=M(S);break;case"l":T=M(S," ");break;case"m":T=M(N.getMonth()+1);break;case"M":T=M(N.getMinutes());break;case"q":T=""+(Math.floor(N.getMonth()/3)+1);break;case"S":T=M(N.getSeconds());break;case"y":T=M(N.getFullYear()%100);break;case"Y":T=""+N.getFullYear();break;case"p":T=(V)?("am"):("pm");break;case"P":T=(V)?("AM"):("PM");break;case"w":T=""+N.getDay();break}L.push(T);O=false}else{if(T=="%"){O=true}else{L.push(T)}}}return L.join("")}function D(L){function M(T,S,R,Q){T[S]=function(){return R[Q].apply(R,arguments)}}var P={date:L};if(L.strftime!=undefined){M(P,"strftime",L,"strftime")}M(P,"getTime",L,"getTime");M(P,"setTime",L,"setTime");var O=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"];for(var N=0;N<O.length;N++){M(P,"get"+O[N],L,"getUTC"+O[N]);M(P,"set"+O[N],L,"setUTC"+O[N])}return P}function K(N,M){if(M.timezone=="browser"){return new Date(N)}else{if(!M.timezone||M.timezone=="utc"){return D(new Date(N))}else{if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var L=new timezoneJS.Date();L.setTimezone(M.timezone);L.setTime(N);return L}else{return D(new Date(N))}}}}var A={"second":1000,"minute":60*1000,"hour":60*60*1000,"day":24*60*60*1000,"month":30*24*60*60*1000,"quarter":3*30*24*60*60*1000,"year":365.2425*24*60*60*1000};var B=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"]];var C=B.concat([[3,"month"],[6,"month"],[1,"year"]]);var G=B.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function E(L){L.hooks.processOptions.push(function(N,M){I.each(N.getAxes(),function(Q,P){var O=P.options;if(O.mode=="time"){P.tickGenerator=function(c){var g=[];var Z=K(c.min,O);var X=0;var h=(O.tickSize&&O.tickSize[1]==="quarter")||(O.minTickSize&&O.minTickSize[1]==="quarter")?G:C;if(O.minTickSize!=null){if(typeof O.tickSize=="number"){X=O.tickSize}else{X=O.minTickSize[0]*A[O.minTickSize[1]]}}for(var V=0;V<h.length-1;++V){if(c.delta<(h[V][0]*A[h[V][1]]+h[V+1][0]*A[h[V+1][1]])/2&&h[V][0]*A[h[V][1]]>=X){break}}var U=h[V][0];var f=h[V][1];if(f=="year"){if(O.minTickSize!=null&&O.minTickSize[1]=="year"){U=Math.floor(O.minTickSize[0])}else{var b=Math.pow(10,Math.floor(Math.log(c.delta/A.year)/Math.LN10));var T=(c.delta/A.year)/b;if(T<1.5){U=1}else{if(T<3){U=2}else{if(T<7.5){U=5}else{U=10}}}U*=b}if(U<1){U=1}}c.tickSize=O.tickSize||[U,f];var W=c.tickSize[0];f=c.tickSize[1];var S=W*A[f];if(f=="second"){Z.setSeconds(J(Z.getSeconds(),W))}else{if(f=="minute"){Z.setMinutes(J(Z.getMinutes(),W))}else{if(f=="hour"){Z.setHours(J(Z.getHours(),W))}else{if(f=="month"){Z.setMonth(J(Z.getMonth(),W))}else{if(f=="quarter"){Z.setMonth(3*J(Z.getMonth()/3,W))}else{if(f=="year"){Z.setFullYear(J(Z.getFullYear(),W))}}}}}}Z.setMilliseconds(0);if(S>=A.minute){Z.setSeconds(0)}if(S>=A.hour){Z.setMinutes(0)}if(S>=A.day){Z.setHours(0)}if(S>=A.day*4){Z.setDate(1)}if(S>=A.month*2){Z.setMonth(J(Z.getMonth(),3))}if(S>=A.quarter*2){Z.setMonth(J(Z.getMonth(),6))}if(S>=A.year){Z.setMonth(0)}var e=0;var R=Number.NaN;var a;do{a=R;R=Z.getTime();g.push(R);if(f=="month"||f=="quarter"){if(W<1){Z.setDate(1);var j=Z.getTime();Z.setMonth(Z.getMonth()+(f=="quarter"?3:1));var Y=Z.getTime();Z.setTime(R+e*A.hour+(Y-j)*W);e=Z.getHours();Z.setHours(0)}else{Z.setMonth(Z.getMonth()+W*(f=="quarter"?3:1))}}else{if(f=="year"){Z.setFullYear(Z.getFullYear()+W)}else{Z.setTime(R+S)}}}while(R<c.max&&R!=a);return g};P.tickFormatter=function(T,R){var S=K(T,R.options);if(O.timeformat!=null){return F(S,O.timeformat,O.monthNames,O.dayNames)}var Y=(R.options.tickSize&&R.options.tickSize[1]=="quarter")||(R.options.minTickSize&&R.options.minTickSize[1]=="quarter");var U=R.tickSize[0]*A[R.tickSize[1]];var X=R.max-R.min;var a=(O.twelveHourClock)?" %p":"";var Z=(O.twelveHourClock)?"%I":"%H";var V;if(U<A.minute){V=Z+":%M:%S"+a}else{if(U<A.day){if(X<2*A.day){V=Z+":%M"+a}else{V="%b %d "+Z+":%M"+a}}else{if(U<A.month){V="%b %d"}else{if((Y&&U<A.quarter)||(!Y&&U<A.year)){if(X<A.year){V="%b"}else{V="%b %Y"}}else{if(Y&&U<A.year){if(X<A.year){V="Q%q"}else{V="Q%q %Y"}}else{V="%Y"}}}}}var W=F(S,V,O.monthNames,O.dayNames);return W}}})})}I.plot.plugins.push({init:E,options:H,name:"time",version:"1.0"});I.plot.formatDate=F;I.plot.dateGenerator=K})(jQuery);
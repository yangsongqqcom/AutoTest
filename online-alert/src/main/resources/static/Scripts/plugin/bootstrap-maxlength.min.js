/* SmartAdmin - v1.4.1 - 2014-06-26 */
!function(b){b.fn.extend({maxlength:function(a,p){function q(g){var h=g.val(),i=h.match(/\n/g),j=0,k=0;a.utf8?(j=i?getUTF8Length(i):0,k=getUTF8Length(g.val())+j):(j=i?i.length:0,k=g.val().length+j);return k}function r(d,g,h){var i=!0;return !a.alwaysShow&&h-q(d)>g&&(i=!1),i}function s(d,e){var f=e-q(d);return f}function t(c){c.css({display:"block"})}function u(c){c.css({display:"none"})}function v(e,f){var g="";a.message?g=a.message.replace("%charsTyped%",f).replace("%charsRemaining%",e-f).replace("%charsTotal%",e):(a.preText&&(g+=a.preText),g+=a.showCharsTyped?f:e-f,a.showMaxLength&&(g+=a.separator+e),a.postText&&(g+=a.postText));return g}function w(e,g,h,i){i.html(v(h,h-e)),e>0?r(g,a.threshold,h)?t(i.removeClass(a.limitReachedClass).addClass(a.warningClass)):u(i):t(i.removeClass(a.warningClass).addClass(a.limitReachedClass))}function x(d){var e=d[0];return b.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},d.offset())}function y(i,j){var k=x(i),l=i.outerWidth(),m=j.outerWidth(),n=j.width(),o=j.height();switch(a.placement){case"bottom":j.css({top:k.top+k.height,left:k.left+k.width/2-n/2});break;case"top":j.css({top:k.top-o,left:k.left+k.width/2-n/2});break;case"left":j.css({top:k.top+k.height/2-o/2,left:k.left-n});break;case"right":j.css({top:k.top+k.height/2-o/2,left:k.left+k.width});break;case"bottom-right":j.css({top:k.top+k.height,left:k.left+k.width});break;case"top-right":j.css({top:k.top-o,left:k.left+l});break;case"top-left":j.css({top:k.top-o,left:k.left-m});break;case"bottom-left":j.css({top:k.top+i.outerHeight(),left:k.left-m});break;case"centered-right":j.css({top:k.top+o/2,left:k.left+l-m-3})}}function z(c){return c.attr("maxlength")||c.attr("size")}var A=b("body");var B={alwaysShow:!1,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom",showCharsTyped:!0,validate:!1,utf8:!1};b.isFunction(a)&&!p&&(p=a,a={}),a=b.extend(B,a);return this.each(function(){var f=b(this),g=z(f),h=b("<span></span>").css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:50}).html(v(g,"0"));if(f.is("textarea")){f.data("maxlenghtsizex",f.outerWidth()),f.data("maxlenghtsizey",f.outerHeight()),f.mouseup(function(){if(f.outerWidth()!==f.data("maxlenghtsizex")||f.outerHeight()!==f.data("maxlenghtsizey")){y(f,h)}f.data("maxlenghtsizex",f.outerWidth()),f.data("maxlenghtsizey",f.outerHeight())})}A.append(h),f.focus(function(){var c=s(f,z(f));w(c,f,g,h),y(f,h)}),b(window).resize(function(){y(f,h)}),f.blur(function(){h.css("display","none")}),f.keyup(function(c){var d=s(f,z(f)),e=!0,j=c.keyCode||c.which;0!==d||9!==j||c.shiftKey||f.attr("maxlength",z(f)+1).trigger({type:"keypress",which:9}).attr("maxlength",z(f)-1),a.validate&&0>d?e=!1:w(d,f,g,h);return e})})}})}(jQuery);
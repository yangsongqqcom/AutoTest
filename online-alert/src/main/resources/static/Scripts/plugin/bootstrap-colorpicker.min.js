/* SmartAdmin - v1.4.1 - 2014-06-26 */
!function(e){var f=function(b){this.value={h:1,s:1,b:1,a:1},this.setColor(b)};f.prototype={constructor:f,setColor:function(a){a=a.toLowerCase();var d=this;e.each(h.stringParsers,function(b,c){var i=c.re.exec(a),j=i&&c.parse(i),k=c.space||"rgba";return j?(d.value="hsla"===k?h.RGBtoHSB.apply(null,h.HSLtoRGB.apply(null,j)):h.RGBtoHSB.apply(null,j),!1):void 0})},setHue:function(b){this.value.h=1-b},setSaturation:function(b){this.value.s=b},setLightness:function(b){this.value.b=1-b},setAlpha:function(b){this.value.a=parseInt(100*(1-b),10)/100},toRGB:function(j,k,l,m){j||(j=this.value.h,k=this.value.s,l=this.value.b),j*=360;var n,o,p,q,r;j=j%360/60,r=l*k,q=r*(1-Math.abs(j%2-1)),n=o=p=l-r,j=~~j,n+=[r,q,0,0,q,r][j],o+=[q,r,r,q,0,0][j],p+=[0,0,q,r,r,q][j];return{r:Math.round(255*n),g:Math.round(255*o),b:Math.round(255*p),a:m||this.value.a}},toHex:function(i,j,k,l){var m=this.toRGB(i,j,k,l);return"#"+(1<<24|parseInt(m.r)<<16|parseInt(m.g)<<8|parseInt(m.b)).toString(16).substr(1)},toHSL:function(i,j,k,l){i||(i=this.value.h,j=this.value.s,k=this.value.b);var m=i,n=(2-j)*k,o=j*k;o/=n>0&&1>=n?n:2-n,n/=2,o>1&&(o=1);return{h:m,s:o,l:n,a:l||this.value.a}}};var g=function(a,d){this.element=e(a);var i=d.format||this.element.data("color-format")||"hex";this.format=h.translateFormats[i],this.isInput=this.element.is("input"),this.component=this.element.is(".color")?this.element.find(".add-on"):!1,this.picker=e(h.template).appendTo("body").on("mousedown",e.proxy(this.mousedown,this)),this.isInput?this.element.on({focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this)}):this.component?this.component.on({click:e.proxy(this.show,this)}):this.element.on({click:e.proxy(this.show,this)}),("rgba"===i||"hsla"===i)&&(this.picker.addClass("alpha"),this.alpha=this.picker.find(".colorpicker-alpha")[0].style),this.component?(this.picker.find(".colorpicker-color").hide(),this.preview=this.element.find("i")[0].style):this.preview=this.picker.find("div:last")[0].style,this.base=this.picker.find("div:first")[0].style,this.update()};g.prototype={constructor:g,show:function(a){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),e(window).on("resize",e.proxy(this.place,this)),this.isInput||a&&(a.stopPropagation(),a.preventDefault()),e(document).on({mousedown:e.proxy(this.hide,this)}),this.element.trigger({type:"show",color:this.color})},update:function(){this.color=new f(this.isInput?this.element.prop("value"):this.element.data("color")),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor()},setValue:function(b){this.color=new f(b),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor(),this.element.trigger({type:"changeColor",color:this.color})},hide:function(){if(this.picker.is(":visible")){this.picker.hide(),e(window).off("resize",this.place),this.isInput?this.element.prop("value",this.format.call(this)):(e(document).off({mousedown:this.hide}),this.component&&this.element.find("input").prop("value",this.format.call(this)),this.element.data("color",this.format.call(this))),this.element.trigger({type:"hide",color:this.color})}},place:function(){var b=this.component?this.component.offset():this.element.offset();this.picker.css({top:b.top+this.height,left:b.left})},previewColor:function(){try{this.preview.backgroundColor=this.format.call(this)}catch(b){this.preview.backgroundColor=this.color.toHex()}this.base.backgroundColor=this.color.toHex(this.color.value.h,1,1,1),this.alpha&&(this.alpha.backgroundColor=this.color.toHex())},pointer:null,slider:null,mousedown:function(a){a.stopPropagation(),a.preventDefault();var d=e(a.target),i=d.closest("div");if(!i.is(".colorpicker")){if(i.is(".colorpicker-saturation")){this.slider=e.extend({},h.sliders.saturation)}else{if(i.is(".colorpicker-hue")){this.slider=e.extend({},h.sliders.hue)}else{if(!i.is(".colorpicker-alpha")){return !1}this.slider=e.extend({},h.sliders.alpha)}}var j=i.offset();this.slider.knob=i.find("i")[0].style,this.slider.left=a.pageX-j.left,this.slider.top=a.pageY-j.top,this.pointer={left:a.pageX,top:a.pageY},e(document).on({mousemove:e.proxy(this.mousemove,this),mouseup:e.proxy(this.mouseup,this)}).trigger("mousemove")}return !1},mousemove:function(d){d.stopPropagation(),d.preventDefault();var i=Math.max(0,Math.min(this.slider.maxLeft,this.slider.left+((d.pageX||this.pointer.left)-this.pointer.left))),j=Math.max(0,Math.min(this.slider.maxTop,this.slider.top+((d.pageY||this.pointer.top)-this.pointer.top)));this.slider.knob.left=i+"px",this.slider.knob.top=j+"px",this.slider.callLeft&&this.color[this.slider.callLeft].call(this.color,i/100),this.slider.callTop&&this.color[this.slider.callTop].call(this.color,j/100),this.previewColor(),this.element.trigger({type:"changeColor",color:this.color});return !1},mouseup:function(a){a.stopPropagation();a.preventDefault();e(document).off({mousemove:this.mousemove,mouseup:this.mouseup});return !1}},e.fn.colorpicker=function(a,c){return this.each(function(){var b=e(this),d=b.data("colorpicker"),i="object"==typeof a&&a;d||b.data("colorpicker",d=new g(this,e.extend({},e.fn.colorpicker.defaults,i))),"string"==typeof a&&d[a](c)})},e.fn.colorpicker.defaults={},e.fn.colorpicker.Constructor=g;var h={translateFormats:{rgb:function(){var b=this.color.toRGB();return"rgb("+b.r+","+b.g+","+b.b+")"},rgba:function(){var b=this.color.toRGB();return"rgba("+b.r+","+b.g+","+b.b+","+b.a+")"},hsl:function(){var b=this.color.toHSL();return"hsl("+Math.round(360*b.h)+","+Math.round(100*b.s)+"%,"+Math.round(100*b.l)+"%)"},hsla:function(){var b=this.color.toHSL();return"hsla("+Math.round(360*b.h)+","+Math.round(100*b.s)+"%,"+Math.round(100*b.l)+"%,"+b.a+")"},hex:function(){return this.color.toHex()}},sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},RGBtoHSB:function(i,j,k,l){i/=255,j/=255,k/=255;var m,n,o,p;o=Math.max(i,j,k),p=o-Math.min(i,j,k),m=0===p?null:o==i?(j-k)/p:o==j?(k-i)/p+2:(i-j)/p+4,m=(m+360)%6*60/360,n=0===p?0:p/o;return{h:m||1,s:n,b:o,a:l||1}},HueToRGB:function(d,i,j){return 0>j?j+=1:j>1&&(j-=1),1>6*j?d+(i-d)*j*6:1>2*j?i:2>3*j?d+(i-d)*(2/3-j)*6:d},HSLtoRGB:function(d,n,o,p){0>n&&(n=0);var q;q=0.5>=o?o*(1+n):o+n-o*n;var r=2*o-q,s=d+1/3,t=d,u=d-1/3,v=Math.round(255*h.HueToRGB(r,q,s)),w=Math.round(255*h.HueToRGB(r,q,t)),x=Math.round(255*h.HueToRGB(r,q,u));return[v,w,x,p||1]},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(b){return[b[1],b[2],b[3],b[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(b){return[2.55*b[1],2.55*b[2],2.55*b[3],b[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(b){return[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(b){return[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(b){return[b[1]/360,b[2]/100,b[3]/100,b[4]]}}],template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'}}(window.jQuery);